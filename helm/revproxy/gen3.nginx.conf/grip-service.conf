location /grip/reader {
    proxy_connect_timeout 600s;
    proxy_send_timeout 600s;
    proxy_read_timeout 600s;
    send_timeout 600s;

    rewrite ^/grip/(.*) /$1 break;
    proxy_pass http://grip-service.$namespace.svc.cluster.local:8201/reader/api;
}

location /grip/writer {
    proxy_request_buffering off;
    proxy_connect_timeout 600s;
    proxy_send_timeout 600s;
    proxy_read_timeout 600s;
    send_timeout 600s;

    rewrite ^/grip/(.*)$ /$1 break;
    proxy_pass http://grip-service.$namespace.svc.cluster.local:8201;
    client_max_body_size 0;
}

location /grip/graphql   {
    proxy_connect_timeout 600s;
    proxy_send_timeout 600s;
    proxy_read_timeout 600s;
    send_timeout 600s;

    rewrite ^/grip/(.*)$ /$1/query break;

    proxy_pass http://grip-service.$namespace.svc.cluster.local:8201;
}