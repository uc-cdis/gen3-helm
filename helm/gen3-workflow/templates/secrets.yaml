{{- if or (not .Values.global.externalSecrets.deploy) (and .Values.global.externalSecrets.deploy .Values.externalSecrets.createK8sAuditSecret) }}
apiVersion: v1
kind: Secret
metadata:
  name: gen3workflow-g3auto
  labels:
    {{- include "gen3workflow.labels" . | nindent 4 }}
stringData: 
  gen3-workflow-config.yaml: |-
    APP_DEBUG: {{ .Values.workflowConfig.debug }}

    KMS_ENCRYPTION_ENABLED: {{ .Values.workflowConfig.kmsEncryptionEnabled }}


    TES_SERVER_URL: {{ .Values.workflowConfig.tesServerUrl }}
    TASK_IMAGE_WHITELIST: {{ .Values.workflowConfig.taskImageWhitelist }}
    #############
    #  METRICS  #
    #############

    ENABLE_PROMETHEUS_METRICS: {{ .Values.workflowConfig.enablePrometheusMetrics }}
  funnel.conf: |-

    
{{- end }}